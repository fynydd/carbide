@inherits Umbraco.Web.Mvc.UmbracoViewPage
@using ContentModels = Umbraco.Web.PublishedModels
@using System.Xml
@using System.Xml.Linq
@using Umbraco.Core
@using Umbraco.Core.IO
@using Umbraco.Core.Models.Packaging
@using Umbraco.Core.Services

@using Bolide.Helpers
@using Fynydd.Carbide
@{
    Layout = "Master.cshtml";

    foreach (var component in Model.SafeNestedValues("pageContent"))
    {
        if (component.SafeValue<bool>("enabled"))
        {
            if (component.ContentType.Alias == "componentPicker")
            {
                var components = component.SafePickerValues("contentComponents");

                foreach (var item in components)
                {
                    if (item.ContentType.Alias == "bolideSimpleHero")
                    {
                        Html.ViewData.Add(new KeyValuePair<string, object>("instanceId", item.Name.AsCssSelector()));
                        Html.RenderPartial("_Partial_Bolide_Simple_Hero", item, Html.ViewData);
                        Html.ViewData.Clear();
                    }
                }
            }

            if (component.ContentType.Alias == "bolideRichContent")
            {
                Html.ViewData.Add(new KeyValuePair<string, object>("instanceId", component.SafeValue("contentName").AsCssSelector()));
                Html.ViewData.Add(new KeyValuePair<string, object>("nestedContent", component));
                Html.RenderPartial("_Partial_Bolide_Rich_Content", Html.ViewData);
                Html.ViewData.Clear();
            }
        }
    }
}
