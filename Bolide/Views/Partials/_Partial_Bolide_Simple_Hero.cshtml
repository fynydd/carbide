@inherits Umbraco.Web.Mvc.UmbracoViewPage
@using System
@using System.Security.Cryptography
@using Umbraco.Web
@using Fynydd.Carbide

@{ 
    var umbCtx = DependencyResolver.Current.GetService<IUmbracoContextFactory>().EnsureUmbracoContext().UmbracoContext;

    object bolideSimpleHeroInstanceId;
    Html.ViewData.TryGetValue("simpleHeroInstanceId", out bolideSimpleHeroInstanceId);
    var heroId = bolideSimpleHeroInstanceId == null ? "hero-unit" : bolideSimpleHeroInstanceId.ToString();

    Html.ViewData.Add(new KeyValuePair<string, object>("cssSelector", ".bolide_simple_hero#" + heroId));
    Html.RenderPartial("_Partial_CSS_Custom_Properties", Model, Html.ViewData);
    Html.ViewData.Clear();
}
<section id="@(heroId)" class="bolide_simple_hero" sf-unit>
    <div role="presentation" id="dimmer"></div>
    <div sf-outer-wrapper>
        <div sf-inner-wrapper>
            <div role="grid" style="--sf-centered: true;">
                <div role="gridcell" class="outer-gridcell">
                    <div id="hero-content">
                        <div role="presentation">
                            <div role="grid">
                                <div role="gridcell" class="inner-gridcell">
                                    @foreach(var frame in Model.SafeNestedValues("simpleHeroFrames").Where(f => f.SafeValue<bool>("simpleHeroEnabled")))
                                    {
                                    <div class="frame" data-img="@(frame.PickerValue("simpleHeroBackgroundImage").Url)?width=1920&quality=75" style="transition-duration: @(Model.SafeValue<float>("simpleHeroFrameTransitionTime")/1000)s;">
                                        <h1>@Html.Raw(frame.SafeValue("simpleHeroTitle"))</h1>
                                        <div class="excerpt-row">
                                            @Html.Raw(frame.SafeValue("simpleHeroExcerpt"))
                                        </div>
                                        @if(frame.HasValue("simpleHeroButtonText"))
                                        {
                                        <div class="button-row">
                                            <a href="@(frame.HasValue("simpleHeroButtonLink") ? frame.PickerValue("simpleHeroButtonLink").Url : frame.SafeValue<string>("simpleHeroButtonUrl"))" role="button">@Html.Raw(frame.SafeValue("simpleHeroButtonText"))</a>
                                        </div>
                                        }
                                    </div>
                                    }
                                </div>
                            </div>
                            <div class="nodes">
                            @foreach(var frame in Model.SafeNestedValues("simpleHeroFrames").Where(f => f.SafeValue<bool>("simpleHeroEnabled")))
                            {
                                <a></a>
                            }
                                <span></span>
                            </div>
                        </div>
                        <script>

                            $(document).ready(function () {

                                $("#@(heroId)").bolideSimpleHero({

                                    slideDuration: @(Model.SafeValue<int>("simpleHeroFrameDuration")),
                                    transitionTime: @(Model.SafeValue<int>("simpleHeroBgTransitionTime")),
                                    showCountdown: true
                                });
                            });

                        </script>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
