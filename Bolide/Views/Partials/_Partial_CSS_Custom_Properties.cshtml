@inherits Umbraco.Web.Mvc.UmbracoViewPage
@using System
@using System.Security.Cryptography
@using Umbraco.Web
@using Bolide.Helpers
@using Fynydd.Carbide

@{ 
    var umbCtx = DependencyResolver.Current.GetService<IUmbracoContextFactory>().EnsureUmbracoContext().UmbracoContext;

    object cssSelector;
    Html.ViewData.TryGetValue("cssSelector", out cssSelector);

    var selector = cssSelector == null ? "" : cssSelector.ToString();

    if (selector.HasValue())
    {
        var breakpoints = new string[] { "zero", "phab", "tabp", "tabl", "note", "desk", "elas" };

<style type="text/css">
        @foreach (var breakpoint in breakpoints)
        {
            var width = Settings.GetCssBreakpoint(breakpoint);

            if (width != "false")
            {
                if (Model.SafeValue(breakpoint + "CssProperties").HasValue())
                {
    <text>
    @@media (min-width: @(width)) {

        @Html.Raw(selector + ", " + selector + " > [sf-outer-wrapper], " + selector + " > [sf-outer-wrapper] > [sf-inner-wrapper]" ) {

            @(Model.SafeValue(breakpoint + "CssProperties"))
        }
    }
    </text>
                }
            }
        }
</style>
    }
}
