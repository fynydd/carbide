@inherits Umbraco.Web.Mvc.UmbracoViewPage
@using Fynydd.Carbide
@using Carbide.Web.Helpers
@{
    Layout = "Master.cshtml";

    var home = Model.AncestorOrSelf(1);
    var settings = home.Children.First(c => c.ContentType.Alias == "settings");
}
@section pageCssSection
{
    @{
        // Page-level CSS overrides
        Html.ViewData.Add(new KeyValuePair<string, object>("cssSelector", ".carbide_basic_theme"));
        Html.RenderPartial("_Partial_CSS_Custom_Properties", Model, Html.ViewData);
        Html.ViewData.Clear();
    }
}
@{
    foreach(var navigation in settings.SafeNestedValues("navigation"))
    {
        if (navigation.SafeValue<bool>("enabled") && navigation.SafeValue("position") == "Primary" && navigation.HasValue("links"))
        {
            Html.ViewData.Add(new KeyValuePair<string, object>("instanceId", "primary-navigation"));
            Html.RenderPartial("_Partial_Basic_Navigation_Unit", navigation, Html.ViewData);
            Html.ViewData.Clear();
        }
    }

    Html.RenderPartial("_Partial_Render_Content_Units");

    foreach(var navigation in settings.SafeNestedValues("navigation"))
    {
        if (navigation.SafeValue<bool>("enabled") && navigation.SafeValue("position") == "Footer" && navigation.HasValue("links"))
        {
            Html.ViewData.Add(new KeyValuePair<string, object>("instanceId", "footer-navigation"));
            Html.RenderPartial("_Partial_Basic_Navigation_Unit", navigation, Html.ViewData);
            Html.ViewData.Clear();
        }
    }
}
