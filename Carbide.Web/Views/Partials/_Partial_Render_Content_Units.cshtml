@inherits Umbraco.Web.Mvc.UmbracoViewPage
@using ContentModels = Umbraco.Web.PublishedModels
@using System.Xml
@using System.Xml.Linq
@using Umbraco.Core
@using Umbraco.Core.IO
@using Umbraco.Core.Models.Packaging
@using Umbraco.Core.Services

@using Carbide.Web.Helpers
@using Fynydd.Carbide
@{
    if (Model.HasProperty("contentUnits") && Model.HasValue("contentUnits"))
    {
        foreach (var content in Model.SafeNestedValues("contentUnits"))
        {
            if (content.HasProperty("enabled") && content.SafeValue<bool>("enabled"))
            {
                Html.ViewData.Add(new KeyValuePair<string, object>("instanceId", content.SafeValue("unitName").AsCssSelector()));
                Html.ViewData.Add(new KeyValuePair<string, object>("pageId", Model.Id));

                if (content.ContentType.Alias == "simpleHeroUnit")
                {
                    Html.RenderPartial("_Partial_Simple_Hero_Unit", content, Html.ViewData);
                }

                if (content.ContentType.Alias == "elasticContainerUnit")
                {
                    Html.RenderPartial("_Partial_Elastic_Container_Unit", content, Html.ViewData);
                }

                Html.ViewData.Clear();
            }
        }
    }
}
